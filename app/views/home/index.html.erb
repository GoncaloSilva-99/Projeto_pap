<div>

<!-- Botões Testes -->
<% if !user_signed_in? %>
    <%= link_to "Login", new_user_session_path  %>
<% else %>
    <%= button_to "logout", destroy_user_session_path, method: :delete  %>
<% end %>
<br><br><br>
<%= link_to "Criar conta jogador", new_player_profile_registration_path %>
<br><br><br>
<%= link_to "Escolher tipo de conta", choose_account_type_path %>

<br><br><br>
<%= link_to "Escolher Jogador", new_player_profile_registration_path, class: "mt-6 w-full bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg transition" %>

</div>

<br><br><br>    

<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SportX - Club Management</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
<script src="https://unpkg.com/feather-icons"></script>
<script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<style>
    .news-scroll {
        animation: scroll 30s linear infinite;
    }
    @keyframes scroll {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }
    .card-hover:hover {
        transform: translateY(-10px);
        transition: all 0.3s ease;
    }
    #search-bar {
        transition: all 0.3s ease;
        max-width: 0;
        opacity: 0;
        overflow: hidden;
    }
    #search-bar.active {
        max-width: 300px;
        opacity: 1;
        padding-left: 0.75rem;
        padding-right: 0.75rem;
    }
</style>

</head>

<body class="bg-gray-900 text-gray-100 min-h-screen">

    <!-- Navbar -->
    <nav class="bg-gray-800 py-4 px-6 shadow-lg">
        <div class="container mx-auto flex items-center justify-between">
            <!-- Logo and Search -->
            <div class="flex items-center space-x-6">
                <div class="flex items-center">
                    <div class=" w-8 h-8 rounded-md flex items-center justify-center">
                        <%= image_tag "logo_sem_texto.png", alt: "Logo" %>
                    </div>
                    <span class="ml-2 font-bold text-xl">SportX</span>
                </div>
                <div class="relative flex items-center">
                    <button id="search-button" class="p-2 rounded-full hover:bg-gray-700">
                        <i data-feather="search"></i>
                    </button>
                    <input type="text" id="search-bar" placeholder="Search..." 
                           class="bg-gray-700 rounded-full px-4 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>

            <!-- Center Links -->
            <div class="hidden md:flex space-x-6">
                <a href="#" class="hover:text-orange-400 transition">Início</a>
                <a href="#" class="hover:text-orange-400 transition">Clubes</a>
                <a href="#" class="hover:text-orange-400 transition">Jogadores</a>
                <a href="#" class="hover:text-orange-400 transition">Agenda</a>
                <a href="#" class="hover:text-orange-400 transition">Análises</a>
            </div>

            <!-- Right Side -->
            <div class="flex items-center space-x-4">
                <div class="relative">
                    <button class="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md flex items-center space-x-1">
                        <span>Apps</span>
                        <i data-feather="chevron-down" class="w-4 h-4"></i>
                    </button>
                    <div class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 hidden">
                        <a href="#" class="block px-4 py-2 hover:bg-gray-700">Team Management</a>
                        <a href="#" class="block px-4 py-2 hover:bg-gray-700">Player Stats</a>
                        <a href="#" class="block px-4 py-2 hover:bg-gray-700">Match Planner</a>
                    </div>
                </div>
                <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center">
                    <i data-feather="user"></i>
                </div>
            </div>
        </div>
    </nav>


    <!-- News Ticker -->
    <div class="bg-gray-800 py-2 px-6 overflow-hidden bg-gradient-to-b from-gray-900 to-gray-800" id="news-ticker">
        <div class="container mx-auto relative">
            <div class="absolute left-0 top-0 bottom-0 flex items-center z-10">
                <span class="bg-red-500 px-2 py-1 rounded text-xs font-bold">LATEST</span>
            </div>
            <div class="flex whitespace-nowrap news-scroll">
                <div class="flex items-center mr-16">
                    <div class="w-6 h-6 rounded-full bg-gray-700 mr-2 overflow-hidden">
                        <img src="http://static.photos/people/200x200/1" class="w-full h-full object-cover">
                    </div>
                    <span class="font-medium">New tournament announced:</span>
                    <span class="text-gray-400 ml-2">Regional Championship registration now open!</span>
                </div>
                <div class="flex items-center mr-16">
                    <div class="w-6 h-6 rounded-full bg-gray-700 mr-2 overflow-hidden">
                        <img src="http://static.photos/people/200x200/2" class="w-full h-full object-cover">
                    </div>
                    <span class="font-medium">System Update:</span>
                    <span class="text-gray-400 ml-2">New analytics dashboard now available</span>
                </div>
                <div class="flex items-center mr-16">
                    <div class="w-6 h-6 rounded-full bg-gray-700 mr-2 overflow-hidden">
                        <img src="http://static.photos/people/200x200/3" class="w-full h-full object-cover">
                    </div>
                    <span class="font-medium">Training Tip:</span>
                    <span class="text-gray-400 ml-2">Improve your endurance with these exercises</span>
                </div>
                <div class="flex items-center mr-16">
                    <div class="w-6 h-6 rounded-full bg-gray-700 mr-2 overflow-hidden">
                        <img src="http://static.photos/people/200x200/4" class="w-full h-full object-cover">
                    </div>
                    <span class="font-medium">Player Spotlight:</span>
                    <span class="text-gray-400 ml-2">Meet this month's rising star athlete</span>
                </div>
            </div>
        </div>
    </div>
    <style>
        .news-scroll {
            /* Garante que a animação funciona no news-scroll */
            animation: scroll 15s linear infinite; 
        }
        @keyframes scroll {
            0% { transform: translateX(0); }
            /* Se o conteúdo estiver DUPLICADO, -50% faz com que a primeira metade saia da vista e a segunda entre */
            100% { transform: translateX(-50%); } 
        }
        .card-hover:hover {
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        #search-bar {
            transition: all 0.3s ease;
            max-width: 0;
            opacity: 0;
            overflow: hidden;
        }

        #search-bar.active {
            max-width: 800px;
            opacity: 1;
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }

        /* container do ticker precisa de posição relativa para o gradiente de corte */
        #news-ticker .container {
            position: relative;
        }

        /* garante que as notícias iniciem logo após o span LATEST */
        #news-ticker .news-scroll {
            padding-left: 4rem; /* equivalente a pl-16 */
        }

        /* garante que o LATEST fique por cima do texto */
        #news-ticker .absolute.left-0 {
            z-index: 10;
        }
        
        /* area de corte / fade à esquerda para desaparecer no Latest */
        #news-ticker .container::before {
            content: "";
            position: absolute;
            left: -210px;
            top: -7px;
            bottom: 0;
            height: 40px;
            width: 260px;
            background-image: linear-gradient(to bottom, #111827 0%, #1f2937 100%);
            z-index: 10;
            pointer-events: none;
        }

        /* area de corte / fade à direita para desaparecer debaixo do ícone user */
        #news-ticker .container::after {
            content: "";
            position: absolute;
            right: -100px;
            top: -7px;
            bottom: 0;
            height: 40px;
            width: 119px; /* ajustar conforme necessário */
            background-image: linear-gradient(to bottom, #111827 0%, #1f2937 100%);
            z-index: 10;
            pointer-events: none;
        }
    </style>    
    <script>
        // Espera que o DOM(Document Object Model — representação em memória da página HTML/XML que o browser cria)
        // esteja totalmente carregado antes de executar a função
        document.addEventListener('DOMContentLoaded', () => {
        // Se a biblioteca feather estiver disponível, substitui os ícones <i> pelo SVG correspondente
        if (typeof feather !== 'undefined') feather.replace();

        // Obtém o botão que activa a pesquisa pelo id
        const searchButton = document.getElementById('search-button');
        // Obtém o campo de input da pesquisa pelo id
        const searchBar = document.getElementById('search-bar');
        // Obtém o container do nav para cálculos de layout
        const navContainer = document.querySelector('nav .container');
        // Se não existir a searchBar ou o navContainer, sai da função (não prossegue)
        if (!searchBar || !navContainer) return;

        // Seletor do grupo de elementos do lado direito do nav (usado para calcular espaço)
        const rightSideSelector = '.flex.items-center.space-x-4';
        // Função que devolve o elemento do lado direito dentro do nav
        function getRightSideEl() { return navContainer.querySelector(rightSideSelector); }

        // Cria um elemento canvas(área bitmap onde se pode desenhar dinamicamente com JavaScript)
        // para medir a largura do texto
        const canvas = document.createElement('canvas');
        // Obtém o contexto 2D do canvas para medir texto
        const ctx = canvas.getContext('2d');

        // Função que mede a largura em pixels de um texto dado usando o canvas
        function measureTextWidth(text) {
            // Obtém os estilos computados do input para usar a mesma fonte na medição
            const style = window.getComputedStyle(searchBar);
            // Define a fonte do contexto (usa style.font se existir, senão composição de tamanho e família)
            ctx.font = style.font || `${style.fontSize} ${style.fontFamily}`;
            // Mede a largura do texto (ou string vazia) e arredonda para cima
            return Math.ceil(ctx.measureText(text || '').width);
        }

        // Função utilitária que converte "NNpx" para número (float)
        function parsePx(v) { return v ? parseFloat(v.replace('px','')) : 0; }

        // Função que ajusta dinamicamente a largura da barra de pesquisa
        function adjustSearchWidth() {
            // Se a barra de pesquisa não tiver a classe 'active', remove a largura inline e sai
            if (!searchBar.classList.contains('active')) {
            searchBar.style.width = '';
            return;
            }

            // Largura máxima permitida em px
            const MAX_WIDTH = 500;
            // Largura mínima quando activa em px
            const MIN_ACTIVE = 300;

            // Rect do input para cálculos de posição
            const inputRect = searchBar.getBoundingClientRect();
            // Elemento do lado direito (botões) — pode ser null
            const rightEl = getRightSideEl();
            // Espaço disponível até à borda da viewport como fallback
            let available = window.innerWidth - inputRect.left - 16;
            // Se existir o elemento do lado direito, recalcula o espaço disponível até ao início desse elemento
            if (rightEl) {
            const rightRect = rightEl.getBoundingClientRect();
            available = Math.max(80, rightRect.left - inputRect.left - 12);
            }

            // Texto actual (valor do input ou placeholder)
            const text = searchBar.value || searchBar.placeholder || '';
            // Largura do texto medida via canvas
            const textWidth = measureTextWidth(text);

            // Inclui paddings horizontais e um buffer extra para o caret/espacamento
            const cs = window.getComputedStyle(searchBar);
            const paddingLR = parsePx(cs.paddingLeft) + parsePx(cs.paddingRight);
            const extraBuffer = 24; // espaço extra para caret e folga
            const contentWidth = textWidth + paddingLR + extraBuffer;

            // Calcula a largura desejada respeitando mínimo, máximo e espaço disponível
            const desired = Math.max(MIN_ACTIVE, Math.min(MAX_WIDTH, contentWidth, available));
            // Aplica a largura calculada ao input
            searchBar.style.width = desired + 'px';
        }

        // Se o botão de pesquisa existir, adiciona o listener de clique
        if (searchButton) {
            searchButton.addEventListener('click', () => {
            // Alterna a classe 'active' e guarda o estado resultante
            const nowActive = searchBar.classList.toggle('active');
            // Se ficou activa, define uma largura inicial e foca no input (depois do reflow)
            if (nowActive) {
                searchBar.style.width = '300px';
                setTimeout(() => { searchBar.focus(); adjustSearchWidth(); }, 0);
            } else {
                // Se foi desactivada, remove a largura inline
                searchBar.style.width = '';
            }
            });
        }

        // IIFE que gere eventos de input e resize sem poluir o escopo global
        (function() {
            // Guarda o comprimento anterior do valor do input para detecção de mudanças
            let prevLen = searchBar.value ? searchBar.value.length : 0;

            // Ao alterar o conteúdo do input
            searchBar.addEventListener('input', () => {
            // Obtém o novo comprimento do texto
            const len = searchBar.value.length;
            // Se o comprimento não mudou, não faz nada
            if (len === prevLen) return;
            // Recalcula a largura com base no texto actual (assim backspace também reduz)
            adjustSearchWidth();
            // Actualiza o comprimento anterior
            prevLen = len;
            });

            // Ao clicar no botão de pesquisa, sincroniza prevLen após o reflow
            if (searchButton) {
            searchButton.addEventListener('click', () => {
                setTimeout(() => {
                prevLen = searchBar.classList.contains('active') ? (searchBar.value ? searchBar.value.length : 0) : 0;
                }, 0);
            });
            }

            // Ao redimensionar a janela, debounce e recalcula a largura
            window.addEventListener('resize', () => {
            clearTimeout(window.__searchResizeTimer);
            window.__searchResizeTimer = setTimeout(adjustSearchWidth, 120);
            });
        })();

        // Chamada inicial para ajustar a largura quando a página carrega
        adjustSearchWidth();
        });
    </script>

    <!-- Hero Section -->
    <section class="py-16 px-6 bg-gradient-to-b from-gray-900 to-gray-800">
        <div class="container mx-auto">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-8 md:mb-0">
                    <h1 class="text-4xl md:text-5xl font-bold mb-4 leading-tight">
                        Eleva as Estatísticas <span class="text-blue-400"><br> Do Teu Clube</span>
                    </h1>
                    <p class="text-xl text-gray-400 mb-8">
                        A plataforma completa para clubes de futebol e andebol gerirem jogadores, calendários e análises de desempenho.
                    </p>
                    <div class="flex space-x-4">
                        <button class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-md font-medium">
                            Começa Já
                        </button>
                        <button class="border border-gray-600 hover:bg-gray-800 px-6 py-3 rounded-md font-medium">
                            Saiba Mais
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="py-16 px-6 bg-gray-800">
        <div class="container mx-auto">
            <h2 class="text-3xl font-bold mb-12 text-center">Estatísticas Da Plataforma</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-gray-700 p-8 rounded-xl text-center">
                    <div class="text-5xl font-bold text-blue-400 mb-2">1,250+</div>
                    <div class="text-xl mb-4">Jogadores Ativos</div>
                    <div class="text-gray-400">Monitoramento Diário do Desempenho Individual</div>
                </div>
                <div class="bg-gray-700 p-8 rounded-xl text-center">
                    <div class="text-5xl font-bold text-blue-400 mb-2">86</div>
                    <div class="text-xl mb-4">Clubes Ativos</div>
                    <div class="text-gray-400">Desde os Amadores aos Profissionais</div>
                </div>
                <div class="bg-gray-700 p-8 rounded-xl text-center">
                    <div class="text-5xl font-bold text-blue-400 mb-2">5,000+</div>
                    <div class="text-xl mb-4">Jogos Agendados</div>
                    <div class="text-gray-400">Lembretes Automáticos e Monitoramento</div>
                </div>
            </div>
        </div>
    </section>


    <!-- Popular Profiles -->
    <section class="py-16 px-6 bg-gray-900">
        <div class="container mx-auto">
            <h2 class="text-3xl font-bold mb-4">Perfis Populares</h2>
            <p class="text-gray-400 mb-12">Discover the most active clubs and players on our platform</p>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Profile 1 -->
                <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg card-hover transition-transform duration-300">
                    <div class="h-40 bg-gradient-to-r from-blue-500 to-purple-600 relative">
                        <div class="absolute -bottom-12 left-6">
                            <div class="w-24 h-24 rounded-full border-4 border-gray-800 overflow-hidden">
                                <img src="http://static.photos/sport/200x200/1" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </div>
                    <div class="pt-16 px-6 pb-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold">City Strikers FC</h3>
                            <span class="bg-blue-500 text-xs px-2 py-1 rounded-full">Football</span>
                        </div>
                        <p class="text-gray-400 text-sm mb-4">Premier league club with 25 active players and 3 coaches</p>
                        <div class="flex justify-between text-sm">
                            <div>
                                <div class="text-gray-400">Matches</div>
                                <div class="font-medium">42</div>
                            </div>
                            <div>
                                <div class="text-gray-400">Players</div>
                                <div class="font-medium">25</div>
                            </div>
                            <div>
                                <div class="text-gray-400">Rating</div>
                                <div class="flex items-center">
                                    <i data-feather="star" class="w-4 h-4 text-yellow-400 fill-yellow-400 mr-1"></i>
                                    <span>4.8</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile 2 -->
                <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg card-hover transition-transform duration-300">
                    <div class="h-40 bg-gradient-to-r from-orange-500 to-red-600 relative">
                        <div class="absolute -bottom-12 left-6">
                            <div class="w-24 h-24 rounded-full border-4 border-gray-800 overflow-hidden">
                                <img src="http://static.photos/sport/200x200/2" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </div>
                    <div class="pt-16 px-6 pb-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold">Marcus Johnson</h3>
                            <span class="bg-orange-500 text-xs px-2 py-1 rounded-full">Basketball</span>
                        </div>
                        <p class="text-gray-400 text-sm mb-4">Point guard with 18.5 PPG average and 7.2 assists per game</p>
                        <div class="flex justify-between text-sm">
                            <div>
                                <div class="text-gray-400">Games</div>
                                <div class="font-medium">38</div>
                            </div>
                            <div>
                                <div class="text-gray-400">Points</div>
                                <div class="font-medium">703</div>
                            </div>
                            <div>
                                <div class="text-gray-400">Rating</div>
                                <div class="flex items-center">
                                    <i data-feather="star" class="w-4 h-4 text-yellow-400 fill-yellow-400 mr-1"></i>
                                    <span>4.9</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile 3 -->
                <div class="bg-gray-800 rounded-xl overflow-hidden shadow-lg card-hover transition-transform duration-300">
                    <div class="h-40 bg-gradient-to-r from-green-500 to-teal-600 relative">
                        <div class="absolute -bottom-12 left-6">
                            <div class="w-24 h-24 rounded-full border-4 border-gray-800 overflow-hidden">
                                <img src="http://static.photos/sport/200x200/3" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </div>
                    <div class="pt-16 px-6 pb-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-xl font-bold">Elite Hoops Academy</h3>
                            <span class="bg-green-500 text-xs px-2 py-1 rounded-full">Basketball</span>
                        </div>
                        <p class="text-gray-400 text-sm mb-4">Youth development program with 60 players across 4 age groups</p>
                        <div class="flex justify-between text-sm">
                            <div>
                                <div class="text-gray-400">Teams</div>
                                <div class="font-medium">4</div>
                            </div>
                            <div>
                                <div class="text-gray-400">Players</div>
                                <div class="font-medium">60</div>
                            </div>
                            <div>
                                <div class="text-gray-400">Rating</div>
                                <div class="flex items-center">
                                    <i data-feather="star" class="w-4 h-4 text-yellow-400 fill-yellow-400 mr-1"></i>
                                    <span>4.7</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>









